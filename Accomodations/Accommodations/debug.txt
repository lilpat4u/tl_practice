*AccommodationsProcessor.cs:

Список изменений:

* Добавлена проверка на пустую строку при вводе команды (строка 28).

* Добавлены проверки на наличие аргументов для команд (строка 53).

* Добавлена обработка исключений FormatException и OverflowException при парсинге чисел и дат:
Для команды 'book' (строки 68-78).
Для команды 'cancel' (строки 88-91).
Для команды 'find' (строки 110-113).
Для команды 'search' (строки 122-126).

* Добавлена проверка на наличие выполненных команд перед выполнением команды undo (строка 97).

_____________________


*BookCommand.cs:

Список изменений:

* Добавлена обработка исключений в метод Execute():
Весь метод обернут в блок try-catch, и в случае ошибки выводится сообщение (строки 17-22).

* Добавлена обработка исключений в метод Undo():
Весь метод обернут в блок try-catch, и в случае ошибки выводится сообщение (строки 25-30).

_____________________

*CancelBookingCommand.cs:

Список изменений:

* Добавлена обработка исключений в метод Execute():
Весь метод обернут в блок try-catch, и в случае ошибки выводится сообщение (строки 14-27).

_____________________

*FindBookingByIdCommand.cs:

Список изменений:

* Добавлена обработка исключений в метод Execute():
Весь метод обернут в блок try-catch, и в случае ошибки выводится сообщение (строки 14-23).

* Исправлено использование {nameof(GetType)} на {GetType().Name} в методе Undo() (строка 26).

_____________________

*SearchBookingsCommand.cs:

Список изменений:

* Добавлена обработка исключений в метод Execute():
Весь метод обернут в блок try-catch, и в случае ошибки выводится сообщение (строки 16-29).

* Исправлено использование {nameof(GetType)} на {GetType().Name} в методе Undo() (строка 31).

_____________________

*BookingService.cs:

Список изменений с номерами строк:

* Исправлен расчет количества дней до прибытия в методе CalculateCancellationPenaltyAmount (строка 112):
int daysBeforeArrival = (booking.StartDate - DateTime.Now).Days;


* Добавлено предотвращение деления на ноль в методе CalculateCancellationPenaltyAmount (строка 113):
return 5000.0m / Math.Max(daysBeforeArrival, 1); // Prevent division by zero


* Добавлена проверка на null для категории в методе CancelBooking (строка 88-90):
if (category != null)
{
    category.AvailableRooms++;
}
